# Shop API

A simple shop platform backend project. base on clean architecture.

## Requirement

- _GO 1.22 or later_
- _MySQL 8.0 or later_
- _Redis 7.0 or later_

### Optional

- [_homebrew_](https://brew.sh/) _( for macOS )_
- [_docker_](https://docs.docker.com/)
- [_docker-compose_](https://docs.docker.com/compose/) _( containerized development )_
- [_sqlc_](https://github.com/sqlc-dev/sqlc) _( sql code gen )_
- [_goose_](https://github.com/pressly/goose) _( database migration )_

## Quick Start

### Setup environment

```bash
# clone project
$ git clone https://github.com/yanunon/shop-api.git
$ cd shop-api

# prepare and edit config.yaml for server run
$ cp ./config/config.yaml.example ./config/config.yaml

# prepare and edit Makefile.env for database migration
$ cp Makefile.env.example Makefile.env

```

#### Start MySQL and Redis (Optional)

```bash
# install dependencies (macOS required)
$ make install

$ make database.up
# after run this command, should wait about 5 minutes before proceeding to the next step
```

### _** Choose one of the following options to run the project **_

- ### Local Run

  > Requires MySQL and Redis to be running

  ```bash
  # install dependencies (macOS required)
  $ make install

  # run migration
  $ make migrate.up

  # run server
  $ make run
  ```

- ### Docker

  > Requires MySQL and Redis to be running

  ```bash
  # build docker image
  $ make docker.build

  # run docker container
  $ make docker.run
  ```

- ### Docker Compose

  > Requires MySQL and Redis to be running

  ```bash
  # build docker image
  $ make docker.build

  # run docker compose
  $ make compose.up
  ```

## API

**check [API.md](./API.md) for more details**

## Folder Structure

```bash
.
├── config           # environment variables configuration file.
├── database
│   ├── migration   # database migration sql scripts
│   └── sqlc        # sqlc generated files
│       └── query   # sql query files to generate go code
│ 
├── internal
│   │  
│   ├── cmd         # main entry point & dependency injection
│   │  
│   ├── delivery        # http / grpc / cron / websocket / kafka etc delivery
│   │   ├── middleware  # middlewares
│   │   ├── payload     # request payload
│   │   ├── response    # response struct
│   │   ├── restful     # restful api controller
│   │   router.go       # main router
│   │  
│   ├── domain
│   │   ├── entity      # entity interface
│   │   ├── repository  # repository interface
│   │   └── usecase     # usecase interface\
│   │  
│   ├── repository      # repository layer: data access
│   │   ├── conn        # database connection
│   │   └── query       # database query generated by sqlc
│   │  
│   ├── usecase         # usecase layer: business logic
│   │  
│   └── helper          # helper functions
.
```

```

```
